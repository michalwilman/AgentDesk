# שדרוג בוט השיווק - קישורים לחיצים והנעה לפעולה

## 📋 סיכום השינויים

שודרג בוט השיווק בדף הבית כך שכל תשובה כוללת **קישורים לחיצים פעילים** והנעה ברורה לפעולה (Call-to-Action).

---

## ✨ מה השתנה?

### 1. שיפור System Prompt (API)
**קובץ**: `frontend/app/api/homebot/route.ts`

הבוט עכשיו מקבל הנחיות ברורות:
- **תמיד** לכלול הנעה לפעולה בכל תשובה
- לכתוב קישורים בפורמט `[טקסט](URL)`
- לכלול קישורים רלוונטיים בכל תשובה

#### דוגמאות להנחיות החדשות:

**כשמישהו שואל על תקופת ניסיון:**
```
כדי להתחיל את תקופת הניסיון החינמית של 7 ימים, [לחץ כאן להרשמה](/register?plan=starter) 🎉
```

**כשמישהו שואל איך בונים בוט:**
```
בנייה של הבוט פשוטה! [התחל עכשיו](/register?plan=starter) 🚀
```

**כשמישהו שואל על מחירים:**
```
[צפה בכל החבילות והמחירים](/pricing)
[התחל ניסיון חינם](/register?plan=starter)
```

### 2. קומפוננטה חדשה - MessageContent
**קובץ**: `frontend/components/home/HomeChatWidget.tsx`

נוספו 2 פונקציות חדשות:

#### א. `parseMessageWithLinks(text: string)`
- מזהה קישורים בפורמט `[טקסט](URL)` בתוך הטקסט
- מחלקת את הטקסט לחלקים: טקסט רגיל וקישורים
- משתמשת ב-RegEx לזיהוי מדויק

#### ב. `MessageContent` Component
- מציגה הודעות עם קישורים לחיצים
- קישורים מוצגים כ-Next.js `<Link>` components
- סטיילינג מותאם:
  - **הודעות משתמש**: קישורים לבנים עם underline
  - **הודעות בוט**: קישורים בצבע טורקיז (#00E0C6) עם underline
  - **Hover**: הסרת underline
- מוסיפה telemetry event בלחיצה על קישור

### 3. אינטגרציה בתצוגה
החלפנו את התצוגה הישנה:
```tsx
<p className="text-[15px] whitespace-pre-wrap leading-[1.6]">
  {message.content}
</p>
```

בתצוגה החדשה:
```tsx
<MessageContent content={message.content} isUser={message.role === 'user'} />
```

**שני מקומות**:
- Desktop view (שורה 376)
- Mobile view (שורה 558)

---

## 🎯 תוצאות

### לפני השדרוג:
```
אפשר להתחיל תקופת ניסיון חינם ב-/register?plan=starter
                                    ↑
                              טקסט רגיל, לא לחיץ
```

### אחרי השדרוג:
```
כדי להתחיל תקופת ניסיון חינם, [לחץ כאן](/register?plan=starter) 🎉
                                      ↑
                              קישור לחיץ וכחול/לבן
```

---

## 📊 קישורים זמינים

הבוט עכשיו מפנה לעמודים הבאים עם קישורים לחיצים:

| קישור | מטרה |
|------|------|
| `/register?plan=starter` | הרשמה לתקופת ניסיון חינם (7 ימים) |
| `/pricing` | דף מחירים וחבילות |
| `/support` | דף תמיכה |

---

## 🧪 איך לבדוק?

### בדיקה בסיסית:
1. פתח את http://localhost:3000/
2. לחץ על בועת הצ'אט
3. שאל: **"איך מתחילים תקופת ניסיון?"**
4. הבוט יענה עם קישור לחיץ כמו: [לחץ כאן להרשמה](/register?plan=starter)
5. **לחץ על הקישור** → אתה אמור להגיע לדף ההרשמה!

### בדיקות נוספות:
- **שאלה**: "איך בונים בוט?"
  - **תוצאה**: קישור ל-`/register?plan=starter`
  
- **שאלה**: "מה המחירים?"
  - **תוצאה**: קישור ל-`/pricing` + קישור ל-`/register?plan=starter`
  
- **שאלה**: "צריך תמיכה"
  - **תוצאה**: קישור ל-`/support`

### בדיקת Hover:
- העבר עכבר מעל קישור
- ה-underline אמור להעלם
- הקישור נשאר בולט (כחול/לבן)

### בדיקת Mobile:
- פתח DevTools → Toggle device toolbar
- כל הקישורים אמורים להיות לחיצים
- טאץ' על קישור אמור לעבוד חלק

---

## 📈 Telemetry

כל לחיצה על קישור מוסיפה event:
```javascript
console.info('[HOMEBOT] link_clicked', { url: '/register?plan=starter' })
window.dispatchEvent(
  new CustomEvent('homebot_link_clicked', { detail: { url: '/register?plan=starter' } })
)
```

ניתן להשתמש ב-events האלה לאנליטיקס בעתיד.

---

## 🎨 עיצוב הקישורים

### בהודעות בוט (רקע לבן):
```css
color: #00E0C6 (turquoise)
text-decoration: underline
font-weight: 600 (semibold)

hover:
text-decoration: none
```

### בהודעות משתמש (רקע טורקיז):
```css
color: white
text-decoration: underline
font-weight: 600 (semibold)

hover:
text-decoration: none
```

---

## ✅ יתרונות השדרוג

1. ✅ **קישורים לחיצים אמיתיים** - לא צריך להעתיק URL ידנית
2. ✅ **הנעה ברורה לפעולה** - כל תשובה מובילה למקום ספציפי
3. ✅ **חווית משתמש משופרת** - קל יותר להירשם/לראות מחירים
4. ✅ **העלאת Conversion Rate** - סבירות גבוהה יותר שמשתמשים ילחצו
5. ✅ **עקביות** - כל תשובה כוללת CTA
6. ✅ **נגישות** - קישורים עם Next.js Link (navigation מהירה יותר)
7. ✅ **Telemetry** - מעקב אחרי לחיצות על קישורים

---

## 🔧 טכני

### פורמט קישורים:
```
[טקסט הקישור](URL)
```

### RegEx משומש:
```javascript
/\[([^\]]+)\]\(([^)]+)\)/g
```

- `[` - התחלת סוגריים מרובעים
- `([^\]]+)` - קבוצת לכידה 1: טקסט הקישור (כל דבר חוץ מ-`]`)
- `]` - סיום סוגריים מרובעים
- `(` - התחלת סוגריים עגולים
- `([^)]+)` - קבוצת לכידה 2: ה-URL (כל דבר חוץ מ-`)`)
- `)` - סיום סוגריים עגולים
- `g` - global flag (מצא את כל הקישורים)

### דוגמה לפרסור:
```javascript
const text = "היי! [לחץ כאן](/pricing) לראות מחירים"
const parts = parseMessageWithLinks(text)

// Result:
[
  { type: 'text', content: 'היי! ' },
  { type: 'link', content: 'לחץ כאן', url: '/pricing' },
  { type: 'text', content: ' לראות מחירים' }
]
```

---

## 🚀 סטטוס

**✅ הושלם בהצלחה!**

- [x] שיפור System Prompt
- [x] יצירת פונקציית פרסור לקישורים
- [x] יצירת MessageContent component
- [x] אינטגרציה ב-Desktop view
- [x] אינטגרציה ב-Mobile view
- [x] בדיקת Linting (אין שגיאות)
- [x] הוספת Telemetry
- [x] תיעוד

---

## 📝 הערות חשובות

1. **פורמט קישורים חייב להיות מדויק**: `[טקסט](url)` - ללא רווחים נוספים
2. **URL יכול להיות יחסי או מוחלט**: `/pricing` או `https://example.com`
3. **הבוט צריך לכתוב בפורמט הזה**: OpenAI צריך לעקוב אחרי ההנחיות
4. **אם הבוט לא כותב קישורים נכון**: הטקסט יוצג רגיל (לא ישבר)
5. **קישורים פועלים עם Next.js routing**: ניווט מהיר ללא refresh

---

**תאריך עדכון**: 15 באוקטובר 2025  
**גרסה**: 2.0 - קישורים לחיצים + CTA  
**סטטוס**: ✅ פעיל בפרודקשן

